1 - Create a custom container

mkdir -p ~/project/docker
cd ~/project/docker
touch Dockerfile #Docker file
  FROM nginx
  COPY index.html /usr/share/nginx/html/
  
touch index.html  

    <!doctype html>
    <html lang="en">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello Docker!</title>
    </head>
    <body>
    <h1>Hello Docker!</h1>
    <p>This is a custom Docker image.</p>
    </body>
    </html>
    
docker build -t my-nginx . #docker image creation
docker images  #list images


docker run -d -p 8080:80 --name my-nginx-container my-nginx # docker create cotainer 
curl http://localhost:8080

2 - Add Custom Software to the Image

  FROM nginx
  RUN apt-get update && apt-get install -y curl
  COPY index.html /usr/share/nginx/html/

docker build -t my-nginx-curl .
docker images
docker run -d --name curl-container my-nginx-curl
docker exec -it curl-container bash

##Use Environment Variables in the Image
FROM nginx
ENV NGINX_PORT 9000
RUN sed -i "s/listen[[:space:]]*80;/listen $NGINX_PORT;/g" /etc/nginx/conf.d/default.conf
COPY index.html /usr/share/nginx/html/

docker run -d -p 9000:9000 --name env-container my-nginx-env

##Use ENTRYPOINT in Dockerfile

FROM nginx
COPY index.html /usr/share/nginx/html/
COPY start.sh /start.sh
RUN chmod +x /start.sh
ENTRYPOINT ["/start.sh"]

touch start.sh
#!/bin/bash
# Set a default port if NGINX_PORT is not set
export NGINX_PORT=${NGINX_PORT:-9100}
# Replace the port in the nginx configuration
sed -i "s/listen[[:space:]]*80;/listen $NGINX_PORT;/g" /etc/nginx/conf.d/default.conf
echo "Starting Nginx on port $NGINX_PORT"
nginx -g 'daemon off;'

docker build -t my-nginx-entrypoint .
docker run -d -p 9100:9100 -e NGINX_PORT=9100 --name entrypoint-container my-nginx-entrypoint
docker logs entrypoint-container



  
